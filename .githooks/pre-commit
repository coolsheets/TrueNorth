#!/bin/bash

# Pre-commit hook to check for prohibited libraries or patterns

echo "Running pre-commit checks for project standards..."

# Check for Tailwind CSS imports or classes
if grep -r "tailwind" --include="*.{js,jsx,ts,tsx}" ./app/src/ > /dev/null; then
  echo "ERROR: Tailwind CSS usage detected. This project uses Material UI."
  exit 1
fi

# Check for CommonJS patterns
if grep -r "require(" --include="*.{js,jsx,ts,tsx}" ./app/src/ > /dev/null; then
  echo "ERROR: CommonJS require() detected. Use ES6 import syntax."
  exit 1
fi

if grep -r "module.exports" --include="*.{js,jsx,ts,tsx}" ./app/src/ > /dev/null; then
  echo "ERROR: CommonJS module.exports detected. Use ES6 export syntax."
  exit 1
fi

# Check for proper PWA components
REQUIRED_FILES=(
  "./app/src/registerSW.ts"
  "./app/public/manifest.webmanifest"
)

for file in "${REQUIRED_FILES[@]}"; do
  if [ ! -f "$file" ]; then
    echo "WARNING: Missing critical PWA file: $file"
  fi
done

echo "Pre-commit checks passed!"
exit 0
